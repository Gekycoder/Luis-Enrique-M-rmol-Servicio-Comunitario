{% load static %}
    <!DOCTYPE html>
    <html lang="en">

    <head>
        <meta charset="UTF-8">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        <link href="https://fonts.googleapis.com/icon?family=Material+Icons+Sharp" rel="stylesheet">
        {% comment %} <link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Material+Symbols+Outlined:opsz,wght,FILL,GRAD@20..48,100..700,0..1,-50..200" /> {% endcomment %}
        <link rel="stylesheet" href="{% static 'css/adm.css' %}">
        <link rel="stylesheet" href="{% static 'css/calendario.css' %}">
        <link rel="stylesheet" href="{% static 'css/perfil.css' %}">
        <link rel="stylesheet" href="{% static 'css/menu_constancias.css' %}">
        <title>Gestion Administrativa LEM</title>
        <link rel="shortcut icon" type="image/x-icon" href="{% static 'images/lem_icono.ico' %}">
        <meta name="csrf-token" content="{{ csrf_token }}">
    </head>

    <body>

        <div class="container">
            <!-- Sidebar Section -->
            <aside>
                <div class="toggle">
                    <div class="logo">
                        <img src="{% static 'images/logolem_inicio.png' %}">
                        <!-- Sidebar C.E L.E.M -->
                        <h2>E.B<span class="lem"> L.E.M</span></h2>
                    </div>
                    <div class="close" id="close-btn">
                        <span class="material-icons-sharp">
                            close
                        </span>
                    </div>
                </div>

                <div class="sidebar">

                    <a id="planning" href="/sesion-exitosa/" class="sidebar-link">
                        <span class="material-symbols-outlined">strategy</span>
                        <h3 class="sidebar-menu">Planificación</h3>
                    </a>
                    
                    <!-- Menú desplegable de Constancias -->
                    
                        <a id="certificates" href="#" class="sidebar-link">
                            <span class="material-symbols-outlined">verified</span>
                            <h3 class="sidebar-menu">Constancias</h3>
                        </a>
                        <div class="sidebar-submenu" id="certificates-submenu" style="display: none;">
                            <a id="retiro-link" href="#"><span class="material-symbols-outlined">disabled_by_default</span> Retiro</a>
                            <a id="estudio-link" href="#"><span class="material-symbols-outlined">square_foot</span>Estudio</a>
                            <a id="asistencia-link" href="#"><span class="material-symbols-outlined">eda</span>Asistencia</a>
                            <a id="inscripcion-link" href="#"><span class="material-symbols-outlined">how_to_reg</span>Inscripción</a>
                        </div>
                    

                    <a id="students" href="#" class="sidebar-link">
                        <span class="material-symbols-outlined">school</span>
                        <h3 class="sidebar-menu">Estudiantes</h3>
                    </a>

                    <a id="reports" href="#" class="sidebar-link">
                        <span class="material-symbols-outlined">analytics</span>
                        <h3 class="sidebar-menu">Boletines</h3>
                    </a>

                    <a id="users" href="#" class="sidebar-link">
                        <span class="material-symbols-outlined">group</span>
                        <h3 class="sidebar-menu">Usuarios</h3>
                    </a>

                    <!-- Añadir, editar y eliminar usuarios -->
                    <a id="addUser" href="#" class="sidebar-link">
                        <span class="material-symbols-outlined">person_add</span>
                        <h3 class="sidebar-menu">Agregar Usuario</h3>
                    </a>
                    <a id="editUser" href="#" class="sidebar-link">
                        <span class="material-symbols-outlined">edit</span>
                        <h3 class="sidebar-menu">Modificar Usuario</h3>
                    </a>
                    <a id="deleteUser" href="#" class="sidebar-link">
                        <span class="material-symbols-outlined">delete</span>
                        <h3 class="sidebar-menu">Eliminar Usuario</h3>
                    </a>
                    <!-- Fin de Añadir, editar y eliminar usuarios -->

                    <a id="logout" href="#" class="sidebar-link">
                        <span class="material-symbols-outlined">logout</span>
                        <h3 class="sidebar-menu">Salir</h3>
                    </a>
                    
                </div>
            </aside>
            <!-- End of Sidebar Section -->

            <!-- Main Content -->
            <main>

                <!-- Planificacion -->
                <div class="new-users" id="status-widget">
                    <h2>Estatus</h2>
                    <div class="user-list">
                        <div class="user" id="toggle-pendiente">
                            <span class="material-symbols-outlined">keep_public</span>
                            <h2>Por ejecutar</h2>
                            <p id="pendientes-count">0</p>
                        </div>
                        <div class="user" id="toggle-completado">
                            <span class="material-symbols-outlined">task</span>
                            <h2>Completado</h2>
                            <p id="completadas-count">0</p>
                        </div>
                        <div class="user" id="toggle-cancelado">
                            <span class="material-symbols-outlined">free_cancellation</span>
                            <h2>Cancelado</h2>
                            <p id="canceladas-count">0</p>
                        </div>
                    </div>
                </div>
                                

                <div class="right-section">
    
                    <div class="reminders" id="reminders-widget">
                        <div class="header">
                            <h2>Recordatorios</h2>
                            <span class="material-icons-sharp">notifications_none</span>
                        </div>
                        <div id="recordatorios-list">
                            <!-- Lista de tareas se llenará con JavaScript -->
                        </div>
                        <div class="notification add-reminder" id="add-reminder">
                            <div>
                                <span class="material-icons-sharp">add</span>
                                <h3>Agregar Recordatorio</h3>
                            </div>
                        </div>
                    </div>


                    <!-- Modal para crear/editar tareas -->
                    <div id="modal-tarea" style="display: none;" class="modal">
                        <div class="modal-content">
                            <div class="modal-header">
                                <span class="close-button" id="close-modal">&times;</span>
                                <h2>Gestionar Tarea</h2>
                            </div>
                            <div class="modal-body">
                                <form id="tarea-form">
                                    <div class="form-group">
                                        <label for="nombre">Nombre de la Tarea</label>
                                        <input type="text" id="nombre" name="nombre" required>
                                    </div>
                                    <div class="form-group">
                                        <label for="descripcion">Descripción</label>
                                        <textarea id="descripcion" name="descripcion" required></textarea>
                                    </div>
                                    <div class="form-group">
                                        <label for="fecha">Fecha</label>
                                        <input type="date" id="fecha" name="fecha" required>
                                    </div>
                                    <button type="submit" class="btn">Guardar</button>
                                </form>
                            </div>
                        </div>
                    </div>

    
                </div>
                <!-- Planificacion -->

                <div class="user-widget" id="user-widget" style="display: none;">
                    <h2>Usuarios</h2>
                    <div class="search-container">
                        <input type="text" id="users-search" placeholder="Buscar usuarios...">
                    </div>
                    <table id="user-table">
                        <thead>
                            <tr>
                                <th>ID</th>
                                <th>Nombres</th>
                                <th>Apellidos</th>
                                <th>Cedula</th>
                                <th>Usuario</th>
                                <th>Contraseña</th>
                                <th>Correo</th>
                                <th>Teléfono</th>
                                <th>Dirección</th>
                                <th>Rol</th>
                            </tr>
                        </thead>
                        <tbody>
                            <!-- Los datos de los estudiantes se cargarán aquí dinámicamente -->
                        </tbody>
                    </table>
                </div>
                    
                <div class="student-widget" id="students-widget" style="display: none;">
                    <h2>Estudiantes</h2>
                    <div class="search-container">
                        <input type="text" id="students-search" placeholder="Buscar estudiantes...">
                    </div>
                    
                    <table id="students-table">
                        <thead>
                            <tr>
                                <th>ID</th>
                                <th>CI</th>
                                <th>Apellidos y Nombres</th>
                                <th>Grado</th>
                                <th>Sección</th>
                                <th>Sexo</th>
                                <th>Edad</th>
                                <th>Lugar de Nacimiento</th>
                                <th>Fecha de Nacimiento</th>
                                <th>Representante</th>
                                <th>CI Representante</th>
                                <th>Dirección</th>
                                <th>Teléfono</th>
                            </tr>
                        </thead>
                        <tbody>
                            <!-- Los datos de los estudiantes se cargarán aquí dinámicamente -->
                        </tbody>
                    </table>

                    <div id="contextMenu" class="context-menu" style="display: none;">
                        <ul>
                          <li id="generateCertificate">Generar Constancia</li>
                          <!-- Agrega aquí más opciones si lo necesitas -->
                        </ul>
                      </div>

                </div>
                
                <!-- Boletines -->
                <div id="boletinesForm" class="modal">
                    <div class="modal-content">
                        <span class="close" onclick="closeBoletinesModal()">&times;</span>
                        <form id="formBoletines" class="form-grid" method="post">
                            {% csrf_token %}
                            <div class="form-group">
                                <label for="formacionPersonal">Formación Personal y Social:</label>
                                <textarea type="text" id="formacionPersonal" name="formacionPersonal" required></textarea>
                                <small id="formacionPersonalCounter" class="char-counter">0/3170 caracteres usados</small>
                            </div>
                            <div class="form-group">
                                <label for="relacionAmbiente">Relación con el Ambiente:</label>
                                <textarea type="text" id="relacionAmbiente" name="relacionAmbiente" required></textarea>
                                <small id="relacionAmbienteCounter" class="char-counter">0/3170 caracteres usados</small>
                            </div>
                            <div class="form-group">
                                <label for="comunicacionRepresentacion"><br>Comunicación y Representación:</label>
                                <textarea type="text" id="comunicacionRepresentacion" name="comunicacionRepresentacion" required></textarea>
                                <small id="comunicacionRepresentacionCounter" class="char-counter">0/3170 caracteres usados</small>
                            </div>
                            <div class="form-group">
                                <label for="sugerencias">Sugerencias y Recomendación del (la) Docente:</label>
                                <textarea id="sugerencias" name="sugerencias" required></textarea>
                                <small id="sugerenciasCounter" class="char-counter">0/3170 caracteres usados</small>
                            </div>
                            
                            <div class="form-group">
                                <label for="diasHabiles">Días Hábiles:</label>
                                <input type="number" id="diasHabiles" name="diasHabiles" required>
                            </div>
                            <div class="form-group">
                                <label for="asistencias">Asistencias:</label>
                                <input type="number" id="asistencias" name="asistencias" required>
                            </div>
                            <div class="form-group">
                                <label for="inasistencias">Inasistencias:</label>
                                <input type="number" id="inasistencias" name="inasistencias" required>
                            </div>
                            <button type="submit">Aceptar</button>
                        </form>
                    </div>
                </div>
                
                
                
                <!-- Fin boletines -->
                
                
                <!-- Modal para agregar usuario -->
                <div id="widget-addUser" class="modal">
                    <div class="modal-content">
                        <span class="close" onclick="closeAddUserModal()">&times;</span>
                        <form id="addUserForm" class="form-grid">
                            <h2>Agregar Usuario</h2>
                            <input type="text" name="nombres" placeholder="Nombres" required>
                            <input type="text" name="apellidos" placeholder="Apellidos" required>
                            <input type="text" name="cedula" placeholder="Cédula" required>
                            <input type="text" name="usuario" placeholder="Usuario" required>
                            <input type="password" name="contrasena" placeholder="Contraseña" required>
                            <input type="email" name="correo" placeholder="Correo" required>
                            <input type="text" name="telefonos" placeholder="Teléfonos" required>
                            <input type="text" name="direccion" placeholder="Direccion" required>
                            <input type="text" name="rol" placeholder="Rol" required>
                            <button type="submit">Agregar</button>
                        </form>
                    </div>
                </div>

                <!-- Modal para modificar usuario -->
                <div id="widget-editUser" class="modal">
                    <form id="editUserForm" class="form-grid">
                        <h2>Modificar Usuario</h2>
                        <input type="number" id="userId" name="id" placeholder="ID del Usuario" required>
                        <input type="text" id="userNombres" name="nombres" placeholder="Nombres" required>
                        <input type="text" id="userApellidos" name="apellidos" placeholder="Apellidos" required>
                        <input type="text" id="userCedula" name="cedula" placeholder="Cédula" required>
                        <input type="text" id="userUsuario" name="usuario" placeholder="Usuario" required>
                        <input type="password" id="userContrasena" name="contrasena" placeholder="Contraseña" required>
                        <input type="email" id="userCorreo" name="correo" placeholder="Correo" required>
                        <input type="text" id="userTelefonos" name="telefonos" placeholder="Teléfonos" required>
                        <input type="text" id="userDireccion" name="direccion" placeholder="Dirección" required>
                        <input type="text" id="userRol" name="rol" placeholder="Rol" required>
                        <button type="submit">Modificar</button>
                    </form>
                </div>

                <!-- Modal para eliminar usuario -->
                <div id="widget-deleteUser" class="modal">
                    <div class="modal-content">
                        <span class="close" onclick="closeDeleteUserModal()">&times;</span>
                        <form id="deleteUserForm" class="form-grid">
                            <h2>Eliminar Usuario</h2>
                            <input type="text" name="id" placeholder="ID del Usuario" required>
                            <button type="submit">Eliminar</button>
                        </form>
                    </div>
                </div>



                
                {% comment %} <div class="new-users">
                    <h2>New Users</h2>
                    <div class="user-list">
                        <div class="user">
                            <img src="images/profile-2.jpg">
                            <h2>Jack</h2>
                            <p>54 Min Ago</p>
                        </div>
                        <div class="user">
                            <img src="images/profile-3.jpg">
                            <h2>Amir</h2>
                            <p>3 Hours Ago</p>
                        </div>
                        <div class="user">
                            <img src="images/profile-4.jpg">
                            <h2>Ember</h2>
                            <p>6 Hours Ago</p>
                        </div>
                        <div class="user">
                            <img src="images/plus.png">
                            <h2>More</h2>
                            <p>New User</p>
                        </div>
                    </div>
                </div> {% endcomment %}
                

                
                {% comment %} <div class="recent-orders">
                    <h2>Recent Orders</h2>
                    <table>
                        <thead>
                            <tr>
                                <th>Course Name</th>
                                <th>Course Number</th>
                                <th>Payment</th>
                                <th>Status</th>
                                <th></th>
                            </tr>
                        </thead>
                        <tbody></tbody>
                    </table>
                    <a href="#">Show All</a>
                </div> {% endcomment %}
                

            </main>
            <!-- End of Main Content -->

            <!-- Right Section -->
            
            <div class="right-section">
                

                <div class="nav">
                    <button id="menu-btn">
                        <span class="material-icons-sharp">
                            menu
                        </span>
                    </button>
                    <div class="dark-mode">
                        <span class="material-icons-sharp active">
                            light_mode
                        </span>
                        <span class="material-icons-sharp">
                            dark_mode
                        </span>
                    </div>

                    <div class="profile-dropdown">
                        <div class="profile-button" type="button" id="profile-menu-button" aria-haspopup="menu" aria-expanded="false">
                            <div class="profile-photo">
                                <img src="{{ profile_photo_url }}" alt="Foto de perfil" id="profile-img"/>
                            </div>
                            
                            <div class="info">
                                <b>{{ usuario_nombre }}</b>
                                <small class="text-muted">{{ usuario_rol }}</small>
                            </div>
                            <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="profile-icon">
                                <path d="m6 9 6 6 6-6"></path>
                            </svg>
                        </div>
                        <div class="profile-menu" id="profile-menu" data-state="closed">
                            <a href="#" id="change-photo">
                                <span class="material-symbols-outlined">imagesmode</span>
                                Foto de perfil
                            </a>
                    
                            <a href="#" id="modify-user">
                                <span class="material-symbols-outlined">manage_accounts</span>
                                Modificar usuario
                            </a>
                    
                            <a id="logout-profile" href="#">
                                <span class="material-symbols-outlined">logout</span>
                                Cerrar sesión
                            </a>
                        </div>
                    </div>                                                                        
                    
                    <!-- Input y formulario ocultos para subir la foto -->
                    <form id="upload-photo-form" enctype="multipart/form-data" style="display: none;">
                        <input type="file" name="profile_photo" id="upload-photo-input">
                    </form>                                                      
                                                                
                </div>

                <div class="user-profile" id="calendar-widget">
                    <div class="wrapper">
                        <header>
                          <p class="current-date"></p>
                          <div class="icons">
                            <span id="prev" class="material-symbols-rounded">chevron_left</span>
                            <span id="next" class="material-symbols-rounded">chevron_right</span>
                          </div>
                        </header>
                        <div class="calendar">
                          <ul class="weeks">
                            <li>D</li>
                            <li>L</li>
                            <li>M</li>
                            <li>X</li>
                            <li>J</li>
                            <li>V</li>
                            <li>S</li>
                          </ul>
                          <ul class="days"></ul>
                        </div>
                      </div>
                </div>

        </div>
        <script src="{% static 'js/sidebar_sesion.js' %}"></script>
        <script src="{% static 'js/calendario.js' %}"></script>
        <script src="{% static 'js/planificacion.js' %}"></script>
        <script src="{% static 'js/sidebar_constancias.js' %}"></script>
        <script src="{% static 'js/eventos_sidebar.js' %}"></script>
        <script src="{% static 'js/boletines.js' %}"></script>
        <script src="{% static 'js/manejo_de_usuarios.js' %}"></script>
        <script src="https://code.jquery.com/jquery-3.5.1.js"></script>
        <script src="https://cdn.datatables.net/1.11.3/js/jquery.dataTables.min.js"></script>

    </body>

    </html>